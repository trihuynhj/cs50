## PICPRANKCS50
1. **Video Demo**: <https://youtu.be/QEzhvrqwjpQ>

2. **Description**:
    - Implementation: PicPrankCS50 is a simple web application built with Python (Flask framework) on the server side, HTML/CSS and some basic JavaScript on the client side. The program also utilizes the SerpAPI for Google Image Search engine, Python's SMTP library for sending email and some other minor libraries. Admittedly, I took the inspiration from Problem Set 9 (Finance) for the creation of this program. I utilized the MVC (Model-View-Controller) design pattern and some initialization code to get the program started, as I wanted to focus on the implementation of the core idea (which is explained below). I hope that it is not against the rule. Also, a big thank you to the CS50 Staff for their awesome and super-easy-to-use CS50 IDE, which comes with Python, HTML/CSS, JavaScript and also the useful SQLite. Without it, I could not have finished this project.
    - Functionality: PicPrankCS50 allows users to enter a search keyword and an email address. It will randomly choose an image from the results of the search and send it to the provided email address using its own email (picprank.cs50@gmail.com). Users will not use their own email account to send images (for security reasons), but will be asked to register for an account to use the service. Moreoever, as there is limit to the free plan of the SerpAPI services, each user will only be allowed 10 searches. After than, user will need to register for another account to continue using the service (no limit to the number of accounts one can register).

3. **Implementation Detail**:
    - application.py: This file contains all the code that sets up and controls behaviors of the program. It is implemented with the Flask framework (including Flask's Session for user registration, login/logout). I took the inspiration from Problem Set 9 (Finance) and reused some of its initialization code in this file. As the main part, it governs the functionality of all HTML pages (from the templates folder, detail for each page is explained below). It also inherits from Finance other essential code such as generate_password_hash, check_password_hash, error handling etc.

    - helpers.py: Similar to the file with the same name in Problem Set 9, this fileâ€™s purpose is to provide some helper functions to the application.py file.Declaring helper functions separately helps with code organizing and coherence.
        - error() behaves the same as apology() in Finance, but another cat image is being used to show the message to the user. And of course the escape function (from <https://github.com/jacebrowning/memegen#special-characters>) is reused as well.
        - login_required(): same as Finance, decorate routes that require user login.
        - random_image(): this function is one of the core action of the program. It is to connect the SerpAPI (Google Image Search engine), get the results and then use Python's random module to randomly choose and return one image from those results. It is also implemented so that the same image will not be randomly chosen twice. I used the same code structure as the lookup() function from Finance, but the actual implementation is my own.
        - send_email(): this is the other main action of the program. It is to take the returned randomly chosen image and send it to the receiver's email address (which was provided by the user). The implementation for this function is really simple, I used Python's SMTP library and MIMEText to design an HTML email content that shows the receiver some basic information about the program and also displays the chosen image.

    - database.db: This SQL database is implemented with CS50 IDE's SQLite. It has 2 tables. One table called "users" stores user information namely id, username, search_allowed, hash (which is generated from generate_password_hash function in application.py). The other table called "search_history" stores information about each search that user performed using the account, including user_id (which is the unique id in users table), keyword, receiver_email, safesearch (which let the program know whether or not the user has checked the "Adult Content Filtering" box), result_position (which is used to avoid randomly choosing an image twice), result_title, result_link (the whole page URL where the image resides) result_original (the image's original URL), result_thumbnail (a downsized version of the image, used to display on the search history table at "/" page), and time (which is implemented using Python's datetime library).

    - /templates: As the convention for a Flask web application, all the HTML pages are being stored in this /templates folder.
        - layout.html: This is basically the backbone of the application's UI. It is not being used directly in any path in the program, but is implemented so that other pages (routes) can inherit. This way, all the HTML pages will have a consistent appearance.
        - index.html: This is the "/" route. User will be taken to this page once they've logged in. On the web application, it is actually displayed as the "Main Page". Unlike the Finance app, this page not only shows the user account information, but also their activity (i.e. detailed search history).
        - register.html: This is for user to register an account. In order to use the service, visitors must register for an account. This time, to improve on my implementation from Finance app, the register is programmed so that visitors must use a strong password, as in at least 16 characters, containing at least 1 number and 1 special character. Detailed implementation can be found at "/register" route in application.py.
        - login.html: This implementation is simple and exactly the same as Finance app. It is implemented with Flask's Session, then the user_id will be stored in the session.
        - about.html: This page is mostly to introduce the application, how it is implemented, what it does, and how to use it. It contains just some basic HTML/CSS.
        - play.html: This page is the juiciest part of the whole application. It allows the user to enter a search keyword and an email address. Then via application.py, the program will contact the SerpAPI to search for images associated with that keyword, randomly choose one image from those, send that image to the provided email address with some pre-written message (refer to send_email() function in helpers.py), and then redirect the user to "/success" route where the sent image is being displayed so that the user would know what image has been sent. During the execution, if it runs into an error (for instance it could not contact the API, or somehow its request to retrieve the image was denied etc.), it will redirect the user to "/error" route with an appropriate error message instead. I also implemented an option of Adult Content Filtering, so that the search results will not contain any NSFW material. The checkbox is on by default, but the user can totally check it off. And this behavior will also be recorded in user's search history at "/" route (Main Page, or index).
        - error.html: As explained, this behaves the same as the "/apology" in Finance app, except that I changed the image to another meme cat that I really much like. The user will be taken to this page if the program somehow ran into problems during its execution.
        - success.html: As explained in play.html, the user will be taken to this page after they have completed a search (as by clicking the button "Prank' em!" at "/play"). It shows the user the randomly chosen image that has been sent to receiver's email address. It is also implemented with a button called "Try A Different Keyword" to go back to the "/play" route (user can use this button, or use the button on the menu bar, it works exactly the same). Also, the user should be aware that while being at this page, if they press the F5 button, the program will use the same search keyword and email address previously provided to make another play, i.e. get a random image via API, send it to the email address, and redirect the user to a new "/success" route.

    - /static: This folder contains only 2 files, styles.css and scripts.js
        - styles.css: This file is to set the CSS styling for the whole application.
        - scripts.js: I only implemented 1 JavaScript function for this program, which is called imgError(). It is to check for the error in displaying the sent image at "/success" route. Because when testing the program, I encountered a strange issue. So when the program's running, the code in application.py has no problem contacting API, randomly choosing and returning an image, then sending it to the receiver's email address, however when said image is to be displayed at "/success" route so that the user would know what image was chosen and sent, it would sometimes encounter a 403 (request denied, I suppose) so the image is not being displayed correctly. This snippet of JavaScript is to fix that displaying issue. Its purpose is to check the img tag at "/success" route and if an error occurs, it will replace the erroneous image URL with a pre-selected image of a cat (yes, a different one!) with a text saying "SORRY".
    
    - Tests Files: During the development of this web application, in order to really understand how to implement an idea, I decided to make some separate files to test out a function, a Python's library, or an API. I thought these files might be served as a milestone showing my progression, so I've decided not to delete, but to consider them as parts of the development.
        - test.py: This program is to test the ability to send emails with Python's SMTP and MIME libraries.
        - test1.py: This program is to try Python's Regular Expression (RegEx) for the implementation of password checking at "/register" route. I have a little experience with RegEx some time ago when learning the freeCodeCamp's interactive lecture, but I have always found it to be confusing and very hard to grasp.. But I guess I've done okay with it.
        - test2.py: This program is to try using SerpAPI services and figuring out how it works. I had a very fun time implementing this function. I guess this is exactly what people are looking for taking the programming path.
