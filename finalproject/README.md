## PICPRANKCS50
1. **Video Demo**: <https://youtu.be/QEzhvrqwjpQ>

2. **Description**:
    - Implementation: PicPrankCS50 is a simple web application built with Python (Flask framework) on the server side, HTML/CSS and some basic JavaScript on the client side. The program also utilizes the SerpAPI for Google Image Search engine, Python's SMTP library for sending email and some other minor libraries. Admittedly, I took the inspiration from Problem Set 9 (Finance) for the creation of this program. I utilized the MVC (Model-View-Controller) design pattern and some initialization code to get the program started, as I wanted to focus on the implementation of the core idea (which is explained below). I hope that it is not against the rule. Also, a big thank you to the CS50 Staff for their awesome and super-easy-to-use CS50 IDE, which comes with Python, HTML/CSS, JavaScript and also the useful SQLite. Without it, I could not have finished this project.
    - Functionality: PicPrankCS50 allows users to enter a search keyword and an email address. It will randomly choose an image from the results of the search and send it to the provided email address using its own email (picprank.cs50@gmail.com). Users will not use their own email account to send images (for security reasons), but will be asked to register for an account to use the service. Moreoever, as there is limit to the free plan of the SerpAPI services, each user will only be allowed 10 searches. After than, user will need to register for another account to continue using the service (no limit to the number of accounts one can register).

3. **Implementation Detail**:
    - application.py: This file contains all the code that sets up and controls behaviors of the program. It is implemented with the Flask framework (including Flask's Session for user registration, login/logout). I took the inspiration from Problem Set 9 (Finance) and reused some of its initialization code in this file. As the main part, it governs the functionality of all HTML pages (from the templates folder, detail for each page is explained below). It also inherits from Finance other essential code such as generate_password_hash, check_password_hash, error handling etc.

    - helpers.py: Similar to the file with the same name in Problem Set 9, this fileâ€™s purpose is to provide some helper functions to the application.py file.Declaring helper functions separately helps with code organizing and coherence.
        - error() behaves the same as apology() in Finance, but another cat image is being used to show the message to the user. And of course the escape function (from <https://github.com/jacebrowning/memegen#special-characters>) is reused as well.
        - login_required(): same as Finance, decorate routes that require user login.
        - random_image(): this function is one of the core action of the program. It is to connect the SerpAPI (Google Image Search engine), get the results and then use Python's random module to randomly choose and return one image from those results. It is also implemented so that the same image will not be randomly chosen twice. I used the same code structure as the lookup() function from Finance, but the actual implementation is my own.
        - send_email(): this is the other main action of the program. It is to take the returned randomly chosen image and send it to the receiver's email address (which was provided by the user). The implementation for this function is really simple, I used Python's SMTP library and MIMEText to design an HTML email content that shows the receiver some basic information about the program and also displays the chosen image.

    - database.db: This SQL database is implemented with CS50 IDE's SQLite. It has 2 tables. One table called "users" stores user information namely id, username, search_allowed, hash (which is generated from generate_password_hash function in application.py). The other table called "search_history" stores information about each search that user performed using the account, including user_id (which is the unique id in users table), keyword, receiver_email, safesearch (which let the program know whether or not the user has checked the "Adult Content Filtering" box), result_position (which is used to avoid randomly choosing an image twice), result_title, result_link (the whole page URL where the image resides) result_original (the image's original URL), result_thumbnail (a downsized version of the image, used to display on the search history table at "/" page), and time (which is implemented using Python's datetime library).

    - /templates: As the convention for a Flask web application, all the HTML pages are being stored in this /templates folder.
        - layout.html: This is basically the backbone of the application's UI. It is not being used directly in any path in the program, but is implemented so that other pages (routes) can inherit. This way, all the HTML pages will have a consistent appearance.
        - index.html: This is the "/" route. User will be taken to this page once they've logged in. On the web application, it is actually displayed as the "Main Page". Unlike the Finance app, this page not only shows the user account information, but also their activity (i.e. detailed search history).